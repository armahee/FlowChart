<!DOCTYPE html>
<html>
<head>
	<title>AR Mahee Project</title>
	<link rel="stylesheet" href="style.css">
</head>
<body>
<div id="hdholder">
	<img class="map" src="map.png" alt="map">
	<h2>Kilburn Virtual Map</h2>
	<pre id='display'></pre>
	<div id='header'>
		<label class="lbl_flr" for="flr">Choose Starting floor</label>
		<select class="flr fxd" id='flr' onchange="changeFloor(0)">
			<option selected="" value="">Select a floor</option>
			<option value="0">Ground Floor</option>
			<option value="1">Lower First Floor</option>
			<option value="2">First Floor</option>
			<option value="3">Second Floor</option>
		</select><br>
		<label class="lbl_start1" for="srm" id="srml">Select Start Position </label>
		<select class="fxd pth1" id="srm" onchange="showPath(0)">
			<option value="">Choose a Floor First</option>
		</select><br><br>
		<label class="lbl_pos" for="eflr">Choose Ending floor</label>
		<select class="cng-flr fxd" id='eflr' onchange="changeFloor(1)">
			<option selected="" value="">Select a floor</option>
			<option value="0">Ground Floor</option>
			<option value="1">Lower First Floor</option>
			<option value="2">First Floor</option>
			<option value="3">Second Floor</option>
		</select><br>
		<label class="lbl_start2" for="erm" id="erml">Select End Position </label>
		<select class="fxd pth2" id="erm" onchange="showPath(1)">
			<option value="">Choose a Floor First</option>
		</select><br><br>
		<button id="nxbtn" onclick="changeFloor(2)">Click to view Next Step</button>
	</div>
</div>

<div id='bdy'>
	<img id="imgLoader" src="">
</div>
<script type="text/javascript">

	/* This Function Return height of a image from any browser */
	function heightCrossBrowser(element) {
	    /* element - DOM element */

	    /* For FireFox & IE */
	    if(     element.height != undefined && element.height != '' && element.height != 0){
	        this.height  =   element.height;
	    }
	    /* For FireFox & IE */
	    else if(element.clientHeight != undefined && element.clientHeight != '' && element.clientHeight != 0){
	        this.height  =   element.clientHeight;
	    }
	    /* For Chrome * FireFox */
	    else if(element.naturalHeight != undefined && element.naturalHeight != '' && element.naturalHeight != 0){
	        this.height  =   element.naturalHeight;
	    }
	    /* For FireFox & IE */
	    else if(element.offsetHeight != undefined && element.offsetHeight != '' && element.offsetHeight != 0){
	        this.height  =   element.offsetHeight;
	    }
	    return parseInt(this.height);

	}
	// Sleep function used for animation
	function sleep(ms) {
	  return new Promise(resolve => setTimeout(resolve, ms));
	}
	/*
		Decleared variable details:
			straitline_i is for counting how many straitline are drawn currently in the image
			drawIsRunning is for checking that any stritline is being drawn
			imgScale if for image height in pixel
			pathScale is for calculating the (x,y) ratio for the current image height
			pathWeight is for straitline Width
			floorNum is for checking which floor is currently selected
			sStairsP is for indicating which stair is used for the starting floor when two points are selected of defferent floor

	*/
	var straitLine_i = 0, drawIsRunning, imgScale = 600, pathScale = 1, pathWeight = '5px', floorNum = '', sStairsP;//, shortpath = 999999;
	/*
		Strait Line drawing function using Cartesian Geometrical position acording to the main image
	*/
	async function drawSLine(fromX, fromY, toX, toY) {
		//Current (x,y) calculating acording to current height of the image
		fromX = fromX / pathScale;
		fromY = fromY / pathScale;
		toX = toX / pathScale;
		toY = toY / pathScale;
		//Creating the strait line using div
		var info = document.createElement('div');
		info.style.position = 'absolute';
		info.style.borderRadius = pathWeight;
		info.style.left = fromX+'px';
		info.style.top = fromY+'px';
		info.style.backgroundColor = '#06111c';
		info.style.opacity = '70%';
		info.style.zIndex = '1';
		info.id = 'straitLine'+straitLine_i;
		document.getElementById('bdy').appendChild(info);
		//For Vertical line fromX and toX are equal
		if(fromX == toX){
			//If Strait line needs to go down
			if(toY > fromY){
				info.style.width = pathWeight;
				info.style.height = '0px';
				for (var i = 1; i <= toY - (fromY - 5); i++) {
					info.style.height = i.toString()+"px";
					await sleep(5);
				}
			}
			//If Strait line needs to go up
			else if(toY < fromY){
				info.style.top = (fromY+5)+'px';
				info.style.width = pathWeight;
				info.style.height = '0px';
				for (var i = 1; i <= (fromY - toY)+5; i++) {
					info.style.top = (parseInt(info.style.top, 10) - 1)+'px';
					info.style.height = i.toString()+'px';
					await sleep(5);
				}
			}
			//If Strait line is just a point
			else{
				info.style.width = pathWeight;
				info.style.height = pathWeight;
			}
		}
		//For Hrizobntal line fromY and toY are equal
		else if(fromY == toY){
			//If Strait line needs to go right
			if(toX > fromX){
				info.style.width = '0px';
				info.style.height = pathWeight;
				for (var i = 1; i <= toX - (fromX - 5); i++) {
					info.style.width = i.toString()+'px';
					await sleep(5);
				}
			}
			//If Strait line needs to go left
			else if(toX < fromX){
				info.style.left = (fromX+5)+'px';
				info.style.width = '0px';
				info.style.height = pathWeight;
				for (var i = 1; i <= (fromX - toX)+4; i++) {
					info.style.left = (parseInt(info.style.left, 10) - 1)+'px';
					info.style.width = i.toString()+'px';
					await sleep(5);
				}
			}
			//If Strait line is just a point
			else{
				info.style.width = pathWeight;
				info.style.height = pathWeight;
			}
		}
		//If given points are not of a Strait line
		else{
			console.log(fromX+','+fromY+' | '+toX+','+toY);
			alert('Sorry! Unable to draw Strait Line');
		}
	}
	//When any selection changed previous lines should be removed
	function removeLines() {
		var linepar = document.getElementById('bdy');
		while(straitLine_i){
			straitLine_i--;
			linepar.removeChild(document.getElementById('straitLine'+straitLine_i));
		}
	}
	//calculate distance between two point
	function pathDist(srmv, ermv) {
		if(points[floorNum][srmv][0] == points[floorNum][ermv][0]){
			return Math.abs(points[floorNum][srmv][1]-points[floorNum][ermv][1]);
		}
		else if(points[floorNum][srmv][1] == points[floorNum][ermv][1]){
			return Math.abs(points[floorNum][srmv][0]-points[floorNum][ermv][0]);
		}
		else{
			alert('There is a problem with graph. Nodes are not connected!');
			return -1;
		}
	}
	var img = [
		'groundFloor.jpg',
		'lowerFloor.jpg',
		'firstFloor.jpg',
		'secondFloor.jpg'
	];
	var menu = [
		[
			[0,'Loading Bay'],
			[38,'Main Entrance'],
			[4,'LIFT'],
			[68,'Disabled Lift'],
			[5,'Stairs(Besides Loading Bay)'],
			[39,'Stairs(Besides Main Entrance)'],
			[31,'Male Toilet(Besides G105 IT Services)'],
			[64,'Male Toilet(Besides G23 Computr Cluster)'],
			[24,'Female Toilet'],
			[28,'Disabled Toilet'],
			[8,'IT Services Right(Besides Loading Bay)'],
			[9,'IT Services Left(Besides Loading Bay)'],
			[36,'IT Services(Besides Main Entrance)'],
			[12,'G105 IT Services'],
			[32,'IT Services Helpdesk'],
			[41,'G6'],
			[43,'G7'],
			[45,'G10'],
			[47,'G11'],
			[49,'G12'],
			[51,'G13'],
			[54,'G14'],
			[55,'G16'],
			[56,'G18'],
			[58,'G20'],
			[60,'G21'],
			[66,'G23 Computer Cluster'],
			[18,'G33 Research Lab'],
			[62,'G33a'],
			[20,'G35'],
			[69,'G36'],
			[22,'G37'],
			[15,'G41 Collaborative Space']
		],
		[
			[0,'LIFT'],
			[5,'Stairs to Ground Floor and First Floor(Besides LIFT)'],
			[8,'Stairs(Besides LF29)'],
			[10,'LF29'],
			[12,'LF28'],
			[14,'LF27'],
			[17,'LF26'],
			[19,'LF25'],
			[21,'LF24'],
			[23,'LF23'],
			[25,'Stairs(Besides Student Support Office)'],
			[28,'LF22'],
			[30,'Student Support Office'],
			[32,'LF21 Student Resource Centre'],
			[35,'LF17 PGR Space'],
			[37,'LF15 PGR Lab'],
			[41,'LF31 Computer Cluster'],
			[45,'LF34 Collab 2'],
			[49,'Vending'],
			[46,'LF39 Collab 1'],
			[52,'LF16 Tootill 1 Computer Cluster'],
			[55,'LF9 Tootill 0 Computer Cluster'],
			[75,'LF10'],
			[76,'LF11'],
			[78,'Stairs(Besides Lecture Theatre 1.1)'],
			[79,'Lecture Theatre 1.1'],
			[60,'Water Vending'],
			[68,'Byte Cafe'],
			[72,'Stairs(Besides Byte Cafe)'],
			[82,'LF6'],
			[84,'LF5'],
			[87,'Disabled LIFT(Besides LF7 Research Lab)'],
			[88,'Stairs to Ground Floor(Besides LF7 Research Lab)'],
			[89,'LF8 Quiet Lab'],
			[103,'LF7 Research Lab'],
			[101,'Male Toilet'],
			[98,'Female Toilet'],
			[95,'Disabled Lift(Besides LF1 Research Lab)'],
			[90,'LF1 Research Lab'],
			[93,'Stairs to First Floor(Besides LF1 Research Lab)']
		],
		[
			[1,'1.19 Mercury'],
			[9,'1.18B Atlas 2'],
			[7,'1.18A Atlas 1'],
			[33,'1.17 Research Lab'],
			[37,'1.14'],
			[39,'1.15'],
			[40,'1.12 Quiet Area'],
			[34,'1.10 Meeting Room'],
			[42,'1.8 Computer Cluster'],
			[45,'Bridge to IT Building Level 4'],
			[47,'Lecture Theatre 1.5'],
			[50,'Lecture Theatre 1.4'],
			[53,'Lecture Theatre 1.3'],
			[63,'Stairs to Lower First & Ground Floors(Besides LF1)'],
			[65,'Stairs to 2nd Floor(Besides LF1)'],
			[64,'LF1'],
			[68,'Disabled Lift'],
			[71,'Entrance(Elevated Walkway)'],
			[73,'Rear Entrance to Lecture Theatre 1.1'],
			[78,'Lecture Theatre 1.1'],
			[76,'Stairs to Lower First Floor(Besides Lecture Theatre 1.1)'],
			[81,'Courtyard'],
			[86,'Turing Lounge'],
			[26,'1.23 Senior Common Room'],
			[28,'1.24'],
			[25,'1.24A'],
			[20,'1.25'],
			[11,'1.20'],
			[15,'Female Toilet'],
			[13,'Disabled Toilet'],
			[19,'Male Toilet'],
			[22,'LIFT'],
			[24,'Stairs to Lower First & Ground Floors(Besides LIFT)'],
			[90,'Stairs to 2nd Floor(Besides 1.20 Room)']
		],
		[
			[0,'2.94'],
			[1,'2.92'],
			[2,'2.90'],
			[3,'2.89'],
			[4,'2.88'],
			[5,'2.86'],
			[6,'2.71'],
			[7,'2.70'],
			[8,'2.69'],
			[9,'2.68'],
			[10,'2.66'],
			[11,'2.64'],
			[12,'2.62'],
			[13,'2.60'],
			[14,'2.58'],
			[16,'2.54'],
			[19,'2.96'],
			[29,'LIFT'],
			[30,'2.95'],
			[31,'Stairs down to First Floor'],
			[32,'2.93'],
			[33,'2.91'],
			[34,'2.87'],
			[35,'Refuge point'],
			[37,'2.71A'],
			[43,'2.65'],
			[45,'2.63'],
			[46,'2.62'],
			[59,'Stairs'],
			[60,'Female Toilet'],
			[61,'2.100'],
			[62,'2.102'],
			[63,'2.104'],
			[64,'2.106'],
			[65,'2.108'],
			[66,'2.110'],
			[67,'2.112'],
			[68,'2.114'],
			[69,'2.116'],
			[91,'Male Toilet'],
			[92,'2.99'],
			[93,'2.101'],
			[94,'2.103'],
			[95,'2.105'],
			[96,'2.107'],
			[97,'2.109'],
			[98,'2.111'],
			[99,'2.113'],
			[100,'2.115'],
			[101,'Disabled Toilet'],
			[102,'Male Toilet'],
			[103,'2.120A'],
			[116,'2.119'],
			[117,'2.121'],
			[118,'2.123 Head of School'],
			[119,'2.125'],
			[120,'Stairs down to First Floor'],
			[123,'Disabled Lift'],
			[124,'2.120'],
			[125,'2.122'],
			[126,'2.124'],
			[127,'2.126'],
			[128,'2.127'],
			[140,'2.22'],
			[141,'2.1'],
			[142,'2.3 ACSO'],
			[143,'2.4'],
			[144,'2.6'],
			[145,'2.7'],
			[146,'2.10 Admissions'],
			[147,'2.12'],
			[148,'2.14'],
			[149,'2.16'],
			[151,'2.20'],
			[152,'2.13'],
			[164,'Female Toilet'],
			[165,'Male Toilet'],
			[166,'2.83'],
			[167,'2.82'],
			[168,'2.81'],
			[169,'2.80'],
			[170,'2.76'],
			[171,'2.75'],
			[172,'2.74'],
			[173,'2.72'],
			[174,'2.67A'],
			[176,'Spinnaker 2.67'],
			[178,'Plant Room'],
			[182,'2.53'],
			[183,'2.55'],
			[205,'2.52'],
			[206,'2.50'],
			[207,'2.48'],
			[208,'2.46'],
			[209,'2.44'],
			[210,'2.42'],
			[211,'2.40'],
			[212,'2.38'],
			[213,'2.36'],
			[214,'2.34'],
			[215,'2.32'],
			[216,'2.30'],
			[217,'2.28'],
			[218,'Stairs'],
			[219,'2.26'],
			[220,'2.24'],
			[221,'Male Toilet'],
			[222,'2.51'],
			[223,'2.49'],
			[224,'2.45/2.47'],
			[225,'2.43'],
			[227,'2.41'],
			[228,'2.39'],
			[229,'2.37'],
			[230,'2.33'],
			[237,'2.25B Computer Cluster MSc'],
			[239,'Server Room 2.27/2.77'],
			[241,'2.29/31'],
			[245,'2.25A Computer Cluster MSc'],
			[246,'2.9'],
			[248,'2.15 MSc Teaching'],
			[249,'2.19 MSc Teaching']
		]
	];

	var stairs = [
		[
			[5,39],
			[5,39],
			[5,39],
			[5,39]
		],
		[
			[5,25,78,88],
			[25,78],
			[5,25,78,93],
			[25,78,93]
		],
		[
			[24,63],
			[24,63,76],
			[],
			[65,90]
		],
		[
			[59,218],
			[59,218],
			[59,218,31,120],
			[59,218]
		]
	];

	var points = [
		[
			[1080,285],//0
			[1080,500],//1
			[1150,500],//2
			[1150,460],//3
			[1150,400],//4
			[1260,460],//5
			[1325,500],//6
			[1325,870],//7
			[1395,870],//8
			[1270,870],//9
			[1325,1300],//10
			[1500,1300],//11
			[1500,1220],//12
			[1610,1300],//13
			[1610,1000],//14
			[1850,1000],//15
			[1850,1165],//16
			[2150,1165],//17
			[2150,1300],//18
			[1795,1300],//19
			[1795,1360],//20
			[1715,1300],//21
			[1715,1360],//22
			[1610,1400],//23
			[1565,1400],//24
			[1610,1530],//25
			[1385,1530],//26
			[1385,1450],//27
			[1435,1450],//28
			[1325,1450],//29
			[1325,1335],//30
			[1460,1335],//31
			[1325,1530],//32
			[1325,1810],//33
			[1385,1810],//34
			[1385,1865],//35
			[1300,1865],//36
			[1450,1865],//37
			[1450,2030],//38
			[1450,1820],//39
			[1535,1865],//40
			[1535,1930],//41
			[1610,1865],//42
			[1610,1930],//43
			[1675,1865],//44
			[1675,1930],//45
			[1750,1865],//46
			[1750,1930],//47
			[1905,1865],//48
			[1905,1930],//49
			[1955,1865],//50
			[1955,1930],//51
			[2150,1865],//52
			[2150,1905],//53
			[2070,1905],//54
			[2220,1905],//55
			[2220,1865],//56
			[2150,1725],//57
			[2220,1725],//58
			[2150,1680],//59
			[2220,1680],//60
			[2150,1435],//61
			[2090,1435],//62
			[2105,1725],//63
			[2105,1670],//64
			[1840,1725],//65
			[1840,1530],//66
			[1565,1530],//67
			[1565,1800],//68
			[1715,1230]//69
		],
		[
			[1040,410],//0
			[1040,470],//1
			[1210,470],//2
			[1210,290],//3
			[1165,290],//4
			[1165,355],//5
			[1250,290],//6
			[1250,230],//7
			[1165,230],//8
			[1380,290],//9
			[1380,230],//10
			[1510,290],//11
			[1510,230],//12
			[1645,290],//13
			[1645,230],//14
			[1715,290],//15
			[1770,290],//16
			[1770,230],//17
			[1900,290],//18
			[1900,230],//19
			[2030,290],//20
			[2030,230],//21
			[2080,290],//22
			[2170,290],//23
			[2080,365],//24
			[2160,365],//25
			[2080,425],//26
			[1985,425],//27
			[1985,350],//28
			[1985,480],//29
			[2050,480],//30
			[1940,480],//31
			[1940,590],//32
			[1775,590],//33
			[1775,660],//34
			[1775,750],//35
			[1990,660],//36
			[1990,750],//37
			[1715,660],//38
			[1665,660],//39
			[1665,550],//40
			[1515,550],//41
			[1515,750],//42
			[1715,750],//43
			[1715,880],//44
			[1440,880],//45
			[1440,1140],//46
			[1715,1140],//47
			[1715,980],//48
			[1595,980],//49
			[1715,940],//50
			[1880,940],//51
			[1880,1190],//52
			[2085,1190],//53
			[2085,1295],//54
			[2000,1295],//55
			[1715,1295],//56
			[1715,1330],//57
			[1630,1330],//58
			[1630,1420],//59
			[1630,1460],//60
			[1590,1420],//61
			[1590,1475],//62
			[1530,1475],//63
			[1345,1475],//64
			[1345,1140],//65
			[1345,1545],//66
			[1530,1545],//67
			[1630,1545],//68
			[1630,1585],//69
			[1715,1585],//70
			[1715,1640],//71
			[1650,1640],//72
			[2000,1640],//73
			[2000,1475],//74
			[2080,1475],//75
			[2080,1565],//76
			[2065,1640],//77
			[2165,1640],//78
			[2065,1710],//79
			[1715,1735],//80
			[1665,1735],//81
			[1665,1800],//82
			[1580,1735],//83
			[1580,1800],//84
			[1485,1735],//85
			[1485,1785],//86
			[1485,1825],//87
			[1355,1785],//88
			[1715,2040],//89
			[980,2040],//90
			[980,1735],//91
			[860,1735],//92
			[860,1665],//93
			[1060,1735],//94
			[1060,1705],//95
			[1100,1735],//96
			[1100,1805],//97
			[1200,1805],//98
			[1190,1735],//99
			[1190,1775],//100
			[1290,1775],//101
			[1345,1735],//102
			[1430,2040]//103
		],
		[
			[1070,275],//0
			[1300,275],//1
			[1300,205],//2
			[1410,205],//3
			[1410,240],//4
			[1410,565],//5
			[1300,565],//6
			[1165,565],//7
			[1300,370],//8
			[1165,370],//9
			[1515,565],//10
			[1515,450],//11
			[1570,565],//12
			[1570,500],//13
			[1620,565],//14
			[1620,500],//15
			[1700,565],//16
			[1730,565],//17
			[1730,430],//18
			[1600,430],//19
			[1730,370],//20
			[1820,430],//21
			[1820,370],//22
			[1895,430],//23
			[1895,320],//24
			[1895,520],//25
			[1700,685],//26
			[1770,685],//27
			[1770,515],//28
			[1550,685],//29
			[1410,685],//30
			[1410,715],//31
			[1230,715],//32
			[1230,750],//33
			[1230,1100],//34
			[1410,1100],//35
			[1080,750],//36
			[1080,1020],//37
			[1080,1070],//38
			[1150,1070],//39
			[1080,1140],//40
			[1080,1350],//41
			[1185,1350],//42
			[1185,1575],//43
			[1155,1575],//44
			[930,1575],//45
			[1155,1650],//46
			[1155,1825],//47
			[1155,1995],//48
			[1345,1995],//49
			[1345,1825],//50
			[1345,1650],//51
			[1375,1650],//52
			[1375,1825],//53
			[1375,1995],//54
			[1575,1995],//55
			[1575,1730],//56
			[1625,1730],//57
			[1625,1530],//58
			[1410,1530],//59
			[1410,1575],//60
			[1375,1575],//61
			[1345,1575],//62
			[1770,1730],//63
			[1770,1860],//64
			[1845,1730],//65
			[1770,1530],//66
			[1845,1530],//67
			[1845,1670],//68
			[1960,1530],//69
			[1960,1830],//70
			[1960,2000],//71
			[2305,1830],//72
			[2350,1830],//73
			[2305,1675],//74
			[2305,1630],//75
			[2390,1630],//76
			[2570,1675],//77
			[2570,1815],//78
			[2570,1980],//79
			[2305,1980],//80
			[1770,1060],//81
			[1770,820],//82
			[1475,820],//83
			[1475,725],//84
			[1550,725],//85
			[1960,1060],//86
			[1960,820],//87
			[1980,820],//88
			[1980,240],//89
			[1410,430]//90
		],
		[
			[645,315],//0
			[760,315],//1
			[910,315],//2
			[1065,315],//3
			[1170,315],//4
			[1295,315],//5
			[1555,315],//6
			[1695,315],//7
			[1780,315],//8
			[1825,315],//9
			[1950,315],//10
			[2030,315],//11
			[2100,315],//12
			[2185,315],//13
			[2295,315],//14
			[2400,315],//15
			[2490,315],//16
			[1065,385],//17
			[1170,385],//18
			[585,430],//19
			[715,430],//20
			[760,430],//21
			[855,430],//22
			[910,430],//23
			[965,430],//24
			[1000,430],//25
			[1075,430],//26
			[1170,430],//27
			[1295,430],//28
			[1360,430],//29
			[855,500],//30
			[965,500],//31
			[1000,500],//32
			[1075,500],//33
			[1170,500],//34
			[1295,485],//35
			[1295,535],//36
			[1450,485],//37
			[1360,535],//38
			[1555,535],//39
			[1735,535],//40
			[1880,535],//41
			[2110,535],//42
			[1735,450],//43
			[1800,450],//44
			[1880,450],//45
			[2110,450],//46
			[1555,370],//47
			[1695,370],//48
			[1780,370],//49
			[1800,370],//50
			[1825,370],//51
			[1950,370],//52
			[2030,370],//53
			[2100,370],//54
			[2185,370],//55
			[2280,370],//56
			[2295,370],//57
			[2400,370],//58
			[2490,370],//59
			[2280,450],//60
			[660,565],//61
			[660,710],//62
			[660,880],//63
			[660,1030],//64
			[660,1150],//65
			[660,1290],//66
			[660,1430],//67
			[660,1580],//68
			[660,1730],//69
			[715,555],//70
			[715,565],//71
			[715,600],//72
			[715,710],//73
			[715,820],//74
			[715,880],//75
			[715,940],//76
			[715,1030],//77
			[715,1045],//78
			[715,1150],//79
			[715,1165],//80
			[715,1270],//81
			[715,1290],//82
			[715,1385],//83
			[715,1430],//84
			[715,1535],//85
			[715,1580],//86
			[715,1655],//87
			[715,1730],//88
			[715,1820],//89
			[715,1865],//90
			[780,555],//91
			[780,600],//92
			[780,710],//93
			[780,820],//94
			[780,940],//95
			[780,1045],//96
			[780,1165],//97
			[780,1270],//98
			[780,1385],//99
			[780,1535],//100
			[780,1655],//101
			[780,1820],//102
			[580,1865],//103
			[635,1865],//104
			[740,1865],//105
			[850,1865],//106
			[865,1865],//107
			[1020,1865],//108
			[1055,1865],//109
			[1165,1865],//110
			[1195,1865],//111
			[1270,1865],//112
			[1345,1865],//113
			[1400,1865],//114
			[1430,1865],//115
			[850,1805],//116
			[1020,1805],//117
			[1055,1805],//118
			[1195,1805],//119
			[1310,1795],//120
			[1430,1795],//121
			[1430,1730],//122
			[1385,1730],//123
			[635,2000],//124
			[740,2000],//125
			[865,2000],//126
			[1020,2000],//127
			[1165,2000],//128
			[1400,1940],//129
			[1490,1940],//130
			[1555,1940],//131
			[1600,1940],//132
			[1670,1940],//133
			[1850,1940],//134
			[1925,1940],//135
			[2035,1940],//136
			[2125,1940],//137
			[2180,1940],//138
			[2400,1940],//139
			[2490,1940],//140
			[1270,2025],//141
			[1345,2025],//142
			[1490,2025],//143
			[1600,2000],//144
			[1670,2000],//145
			[1925,2000],//146
			[2125,2000],//147
			[2180,2000],//148
			[2290,1980],//149
			[2400,1980],//150
			[2490,1980],//151
			[2035,1840],//152
			[1555,1855],//153
			[1555,1785],//154
			[1555,1690],//155
			[1555,1455],//156
			[1555,1305],//157
			[1555,1165],//158
			[1555,1020],//159
			[1555,975],//160
			[1555,830],//161
			[1555,730],//162
			[1555,685],//163
			[1500,1855],//164
			[1500,1785],//165
			[1500,1690],//166
			[1500,1455],//167
			[1500,1305],//168
			[1500,1165],//169
			[1500,1020],//170
			[1500,975],//171
			[1500,830],//172
			[1500,685],//173
			[1640,590],//174
			[1735,590],//175
			[1860,590],//176
			[1870,730],//177
			[1870,890],//178
			[2110,730],//179
			[2110,635],//180
			[2110,580],//181
			[2200,635],//182
			[2200,580],//183
			[2400,495],//184
			[2400,515],//185
			[2400,610],//186
			[2400,680],//187
			[2400,720],//188
			[2400,825],//189
			[2400,915],//190
			[2400,990],//191
			[2400,1075],//192
			[2400,1160],//193
			[2400,1240],//194
			[2400,1325],//195
			[2400,1410],//196
			[2400,1440],//197
			[2400,1490],//198
			[2400,1560],//199
			[2400,1650],//200
			[2400,1670],//201
			[2400,1765],//202
			[2400,1810],//203
			[2400,1860],//204
			[2490,495],//205
			[2490,610],//206
			[2490,720],//207
			[2490,825],//208
			[2490,915],//209
			[2490,990],//210
			[2490,1075],//211
			[2490,1160],//212
			[2490,1240],//213
			[2490,1325],//214
			[2490,1410],//215
			[2490,1490],//216
			[2490,1560],//217
			[2490,1670],//218
			[2490,1765],//219
			[2490,1860],//220
			[2340,515],//221
			[2310,680],//222
			[2310,825],//223
			[2185,825],//224
			[2310,890],//225
			[2310,1075],//226
			[2310,1020],//227
			[2215,1020],//228
			[2215,1170],//229
			[2320,1160],//230
			[2285,1440],//231
			[2220,1440],//232
			[2100,1440],//233
			[1990,1440],//234
			[1920,1440],//235
			[1770,1440],//236
			[1770,1315],//237
			[1770,1115],//238
			[2100,1115],//239
			[2285,1370],//240
			[2255,1370],//241
			[2220,1370],//242
			[1990,1650],//243
			[1920,1565],//244
			[1850,1565],//245
			[1850,1810],//246
			[645,430],//247
			[2260,1810],//248
			[2180,1650]//249
		]
	];

	var graph = [
		[
			[1],//0
			[0,2,6],//1
			[1,3,4,6],//2
			[2,4,5],//3
			[2,3],//4
			[3],//5
			[1,2,7,10,29,30,32,33],//6
			[6,8,9,10,29,30,32,33],//7
			[7,9],//8
			[7,8],//9
			[6,7,11,13,18,19,21,29,30,32,33],//10
			[10,12,13,18,19,21],//11
			[11],//12
			[10,11,14,18,19,21,23,25,42,43],//13
			[13,15,23,25,42,43],//14
			[14,16],//15
			[15,17],//16
			[16,18,52,53,57,59,61],//17
			[10,11,13,17,19,21,52,53,57,59,61],//18
			[10,11,13,18,20,21],//19
			[19],//20
			[10,11,13,18,19,22,69],//21
			[21,69],//22
			[13,14,24,25,42,43],//23
			[23],//24
			[13,14,23,26,66,67,42,43],//25
			[25,27,34,35,66,67],//26
			[26,28,29,34,35],//27
			[27,29],//28
			[6,7,10,27,28,30,32,33],//29
			[6,7,10,29,31,32,33],//30
			[30],//31
			[6,7,10,29,30,33],//32
			[6,7,10,29,30,32,34],//33
			[26,27,33,35],//34
			[26,27,34,36,37],//35
			[35,37],//36
			[35,36,38,39],//37
			[37,39],//38
			[37,38],//39
			[41,42,44,46,48,50,52,56],//40
			[40],//41
			[13,14,23,25,40,43,44,46,48,50,52,56],//42
			[13,14,23,25,42],//43
			[40,42,45,46,48,50,52,56],//44
			[44],//45
			[40,42,44,47,48,50,52,56],//46
			[46],//47
			[40,42,44,46,49,50,52,56],//48
			[48],//49
			[40,42,44,46,48,51,52,56],//50
			[50],//51
			[17,18,40,42,44,46,48,50,53,56,57,59,61],//52
			[17,18,52,54,55,57,59,61],//53
			[53,55],//54
			[53,54],//55
			[40,42,44,46,48,50,52],//56
			[17,18,52,53,58,59,61,63,65],//57
			[57,63,65],//58
			[17,18,52,53,57,60,61],//59
			[59],//60
			[17,18,52,53,57,59,62],//61
			[61],//62
			[57,58,64,65],//63
			[63],//64
			[57,58,63,66],//65
			[25,26,65,67],//66
			[25,26,66,68],//67
			[67],//68
			[21,22],//69
		],
		[
			[1],//0
			[0,2],//1
			[1,3],//2
			[2,4,6,9,11,13,15,16,18,20,22,23],//3
			[3,5,6,9,11,13,15,16,18,20,22,23],//4
			[4],//5
			[3,4,7,9,11,13,15,16,18,20,22,23],//6
			[6,8],//7
			[7],//8
			[3,4,6,10,11,13,15,16,18,20,22,23],//9
			[9],//10------
			[3,4,6,9,12,13,15,16,18,20,22,23],//11
			[11],//12
			[3,4,6,9,11,14,15,16,18,20,22,23],//13
			[13],//14
			[3,4,6,9,11,13,16,18,20,22,23,38,43,44,47,48,50,56,57,70,71,80,89],//15
			[3,4,6,9,11,13,15,17,18,20,22,23],//16
			[16],//17
			[3,4,6,9,11,13,15,16,19,20,22,23],//18
			[18],//19
			[3,4,6,9,11,13,15,16,18,21,22,23],//20
			[20],//21-----
			[3,4,6,9,11,13,15,16,18,20,23,24,26],//22
			[3,4,6,9,11,13,15,16,18,20,22],//23
			[22,25,26],//24
			[24],//25
			[22,24,27],//26
			[26,28,29],//27
			[27,29],//28
			[27,28,30,31],//29
			[29,31],//30
			[29,30,32],//31
			[31,33],//32
			[32,34,35],//33
			[33,35,36,38,39],//34
			[33,34],//35
			[34,37,38,39],//36
			[36],//37
			[15,34,36,39,43,44,47,48,50,56,57,70,71,80,89],//38
			[34,36,38,40],//39
			[39,41],//40
			[40,42],//41
			[41,43],//42
			[15,38,42,44,47,48,50,56,57,70,71,80,89],//43----
			[15,38,43,45,47,48,50,56,57,70,71,80,89],//44
			[44,46],//45
			[45,47,65],//46
			[15,38,43,44,46,48,50,56,57,65,70,71,80,89],//47
			[15,38,43,44,47,49,50,56,57,70,71,80,89],//48
			[48],//49
			[15,38,43,44,47,48,51,56,57,70,71,80,89],//50
			[50,52],//51
			[51,53],//52
			[52,54],//53
			[53,55,56],//54
			[54,56,73,74],//55
			[15,38,43,44,47,48,50,54,55,57,70,71,80,89],//56
			[15,38,43,44,47,48,50,56,58,70,71,80,89],//57
			[57,59,60],//58
			[58,60,61],//59
			[58,59],//60
			[59,62],//61
			[61,63,64],//62
			[62,64,67],//63
			[62,63,65,66,102],//64
			[46,47,64,66,102],//65
			[64,65,67,68,102],//66
			[63,66,68],//67
			[66,67,69],//68
			[68,70],//69
			[15,38,43,44,47,48,50,56,57,69,71,80,89],//70
			[15,38,43,44,47,48,50,56,57,70,72,73,77,78,80,89],//71
			[71,73,77,78],//72
			[55,71,72,74,77,78],//73
			[55,73,75],//74
			[74,76],//75
			[75],//76
			[71,72,73,78,79],//77
			[71,72,73,77],//78
			[77],//79
			[15,38,43,44,47,48,50,56,57,70,71,81,83,85,89,91,92,94,96,99,102],//80
			[80,82,83,85,91,92,94,96,99,102],//81
			[81],//82
			[80,81,84,85,91,92,94,96,99,102],//83
			[83],//84
			[80,81,83,86,87,91,92,94,96,99,102],//85
			[85,87,88],//86
			[85,86],//87
			[86],//88
			[15,38,43,44,47,48,50,56,57,70,71,80,90,103],//89
			[89,91,103],//90
			[80,81,83,85,90,92,94,96,99,102],//91
			[80,81,83,85,91,93,94,96,99,102],//92
			[92],//93
			[80,81,83,85,91,92,95,96,99,102],//94
			[94],//95
			[80,81,83,85,91,92,94,97,99,102],//96
			[96,98],//97
			[97],//98
			[80,81,83,85,91,92,94,96,100,102],//99
			[99,101],//100
			[100],//101
			[64,65,66,80,81,83,85,91,92,94,96,99],//102
			[89,90],//103
		],
		[
			[1],//0
			[0,2,6,8],//1
			[1,3,6,8],//2
			[2,4,5,30,31,35,59,60,90],//3
			[3,5,30,31,35,59,60,89,90],//4
			[3,4,6,7,10,12,14,16,17,30,31,35,59,60,90],//5
			[1,2,5,7,8,10,12,14,16,17],//6
			[5,6,10,12,14,16,17],//7
			[1,2,6,9],//8
			[8],//9
			[5,6,7,11,12,14,16,17],//10
			[10],//11
			[5,6,7,10,13,14,16,17],//12
			[12],//13
			[5,6,7,10,12,15,16,17],//14
			[14],//15
			[5,6,7,10,12,14,17,26],//16
			[5,6,7,10,12,14,16,18,20],//17
			[17,19,20,21,23],//18
			[18,21,23],//19
			[17,18],//20
			[18,19,22,23],//21
			[21],//22
			[18,19,21,24,25],//23
			[23,25],//24
			[23,24],//25
			[16,27,29,30],//26
			[26,28,29,30],//27
			[27],//28
			[26,27,30,85],//29
			[3,4,5,26,27,29,31,35,59,60,90],//30
			[3,4,5,30,32,35,59,60,90],//31
			[31,33,34],//32
			[32,34,36],//33
			[32,33,35],//34
			[3,4,5,30,31,34,59,60,90],//35
			[33,37,38,40,41],//36
			[36,38,40,41],//37
			[36,37,39,40,41],//38
			[38],//39
			[36,37,38,41],//40
			[36,37,38,40,42],//41
			[41,43],//42
			[42,44,45,60,61,62],//43
			[43,45,46,47,48,60,61,62],//44
			[43,44,60,61,62],//45
			[44,47,48,51,52],//46
			[44,46,48],//47
			[44,46,47,49,54,55],//48
			[48,50,51,54,55,62],//49
			[49,51,62],//50
			[46,49,50,52,62],//51
			[46,51,53,54,61],//52
			[52,54,61],//53
			[48,49,52,53,55,61],//54-------
			[48,49,54,56],//55
			[55,57,63,65],//56
			[56,58,63,65],//57
			[57,59,66,67,69],//58
			[3,4,5,30,31,35,58,60,66,67,69,90],//59
			[3,4,5,30,31,35,43,44,45,59,61,62,90],//60
			[43,44,45,52,53,54,60,62],//61
			[43,44,45,49,50,51,60,61],//62
			[56,57,64,65,66,81,82],//63
			[63,66,81,82],//64
			[56,57,63,67,68],//65
			[58,59,63,64,67,69,81,82],//66
			[58,59,65,66,68,69],//67
			[65,67],//68
			[58,59,66,67,70,71,86,87],//69
			[69,71,72,73,86,87],//70
			[69,70,86,87],//71
			[70,73,74,75,80],//72
			[70,72],//73
			[72,75,77,80],//74
			[72,74,76,80],//75
			[75],//76
			[74,78,79],//77
			[77,79],//78
			[77,78,80],//79
			[72,74,75,79],//80
			[63,64,66,82,86],//81
			[63,64,66,81,83],//82
			[82,84],//83
			[83,85],//84
			[29,84],//85
			[69,70,71,81,87],//86
			[69,70,71,86,88],//87
			[87,89],//88
			[4,88],//89
			[3,4,5,30,31,35,59,60],//90
		],
		[
			[247],//0
			[21],//1
			[23],//2
			[17],//3
			[18,27,34],//4
			[28,35,36],//5
			[47,39,163,162,161,160,159,158,157,156,155,154,153,131],//6
			[48],//7
			[49],//8
			[51],//9
			[52],//10
			[53],//11
			[54],//12
			[55],//13
			[57],//14
			[16,58,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,139,150],//15
			[15],//16
			[3,18],//17
			[17,4,27,34],//18
			[247,20,21,22,23,24,25,26,27,28],//19
			[19,247,21,22,23,24,25,26,27,28,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90],//20
			[1,20,247,19,22,23,24,25,26,27,28],//21
			[30,21,20,247,19,23,24,25,26,27,28],//22
			[2,22,21,20,247,19,24,25,26,27,28],//23
			[31,23,22,21,20,247,19,25,26,27,28],//24
			[32,20,21,22,23,24,19,247,26,27,28],//25
			[33,27,28,25,24,23,22,21,20,19,247],//26
			[34,28,18,4,26,25,24,23,22,21,20,19,247],//27
			[5,35,36,20,21,22,23,24,25,26,27,247,19],//28
			[38],//29
			[22],//30
			[24],//31
			[25],//32
			[26],//33
			[27],//34
			[36,28,5,37],//35
			[5,28,35,38,39,40,41,42],//36
			[35],//37
			[36,29,39,40,41,42],//38
			[36,38,47,6,163,162,161,160,159,158,157,156,155,154,153,131,40,41,42],//39
			[36,38,39,43,175,41,42],//40
			[36,45,42,40,39,38],//41
			[36,46,181,180,179,41,40,39,38],//42
			[40,175],//43
			[45,50],//44
			[44,41],//45
			[42,181,180,179],//46
			[6,39,163,162,161,160,159,158,157,156,155,154,153,131,48,49,50,51,52,53,54,55,56,57,58,59],//47
			[7,47,49,50,51,52,53,54,55,56,57,58,59],//48
			[8,48,47,50,51,52,53,54,55,56,57,58,59],//49
			[44,49,48,47,51,52,53,54,55,56,57,58,59],//50
			[9,50,49,48,47,52,53,54,55,56,57,58,59],//51
			[10,53,54,55,56,57,58,59,51,50,49,48,47],//52
			[52,51,50,49,48,47,11,54,55,56,57,58,59],//53
			[12,53,52,51,50,49,48,47,55,56,57,58,59],//54
			[13,56,57,58,59,54,53,52,51,50,49,48,47],//55
			[60,57,58,59,55,54,53,52,51,50,49,48,47],//56
			[14,58,59,56,55,54,53,52,51,50,49,48,47],//57
			[59,15,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,139,150,57,56,55,54,53,52,51,50,49,48,47],//58
			[47,48,49,50,51,52,53,54,55,56,57,58],//59
			[56],//60
			[71],//61
			[73,93],//62
			[75],//63
			[77],//64
			[79],//65
			[82],//66
			[84],//67
			[86],//68
			[88],//69
			[91,20,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90],//70
			[20,61,70,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90],//71
			[92,20,70,71,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90],//72
			[62,93,20,70,71,72,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90],//73
			[94,20,70,71,72,73,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90],//74
			[63,20,70,71,72,73,74,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90],//75	
			[95,20,70,71,72,73,74,75,77,78,79,80,81,82,83,84,85,86,87,88,89,90],//76
			[64,20,70,71,72,73,74,75,76,78,79,80,81,82,83,84,85,86,87,88,89,90],//77
			[96,20,70,71,72,73,74,75,76,77,79,80,81,82,83,84,85,86,87,88,89,90],//78
			[65,20,70,71,72,73,74,75,76,78,77,80,81,82,83,84,85,86,87,88,89,90],//79
			[97,20,70,71,72,73,74,75,76,77,78,79,81,82,83,84,85,86,87,88,89,90],//80
			[98,20,70,71,72,73,74,75,76,77,78,79,80,82,83,84,85,86,87,88,89,90],//81
			[66,20,70,71,72,73,74,75,76,77,78,79,80,81,83,84,85,86,87,88,89,90],//82
			[99,20,70,71,72,73,74,75,76,77,78,79,80,81,82,84,85,86,87,88,89,90],//83
			[67,20,70,71,72,73,74,75,76,77,78,79,80,81,82,83,85,86,87,88,89,90],//84
			[100,20,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,86,87,88,89,90],//85
			[68,20,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,87,88,89,90],//86
			[101,20,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,88,89,90],//87
			[69,20,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,89,90],//88
			[102,20,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,90],//89
			[20,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89, 103,104,105,106,107,108,109,110,111,112,113,114,115],//90
			[70],//91
			[72],//92
			[73,62],//93
			[74],//94
			[76],//95
			[78],//96
			[80],//97
			[81],//98
			[83],//99
			[85],//100
			[87],//101
			[89],//102
			[90,104,105,106,107,108,109,110,111,112,113,114,115],//103
			[103,124,90,105,106,107,108,109,110,111,112,113,114,115],//104
			[125,90,103,104,106,107,108,109,110,111,112,113,114,115],//105
			[116,90,103,104,105,107,108,109,110,111,112,113,114,115],//106
			[126,90,103,104,105,106,108,109,110,111,112,113,114,115],//107
			[117,127,90,103,104, 105,106,107,109,110,111,112,113,114,115],//108
			[118,90,103,104,105,106,107,108,110,111,112,113,114,115],//109
			[128,90,103,104,105,106,107,108,109,111,112,113,114,115],//110
			[119,90,103,104,105,106,107,108,109,110,112,113,114,115],//111
			[141,90,103,104,105,106,107,108,109,110,111,113,114,115],//112
			[142,90,103,104,105,106,107,108,109,110,111,112,114,115],//113
			[129,90,103,104,105,106,107,108,109,110,111,112,113,115],//114
			[121,122,90,103,104,105,106,107,108,109,110,111,112,113,114],//115
			[106],//116
			[108,127],//117
			[109,119],//118
			[118,111],//119
			[121],//120
			[120,115,122],//121
			[123,121,115],//122
			[122],//123
			[104],//124
			[105],//125
			[107],//126
			[108,117],//127
			[110],//128
			[114,130,131,132,133,134,135,136,137,138,139,140],//129
			[143,129, 131,132,133,134,135,136,137,138,139,140],//130
			[129,130,132, 133,134,135,136,137,138,139,140,153,154,155,156,157,158,159,160,161,162,163,39,47,6],//131
			[144,129,130,131,133,134,135,136,137,138,139,140],//132
			[145,129,130,131,132,134,135,136,137,138,139,140],//133
			[246,245,129,130,131,132,133,135,136,137,138,139,140],//134
			[146,129,130,131,132,133,134,136,137,138,139,140],//135
			[152,129,130,131,132,133,134,135,137,138,139,140],//136
			[147,129,130,131,132,133,134,135,136,138,139,140],//137
			[148,129,130,131,132,133,134,135,136,137,139,140],//138
			[150,129,130,131,132,133,134,135,136,137,138,140,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,58,15],//139
			[129,130,131,132,133,134,135,136,137,138,139],//140
			[112,142,143],//141
			[141,143,113],//142
			[130,141,142],//143
			[132],//144
			[133],//145
			[135],//146
			[137],//147
			[138],//148
			[150,151],//149
			[149,151,139, 184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,58,15],//150
			[149,150],//151
			[136],//152
			[131,154,155,156,157,158,159,160,161,162,163,164,39,47,6],//153
			[153,131, 155,156,157,158,159,160,161,162,163,165,39,47,6],//154
			[166,131,153,154,156,157,158,159,160,161,162,163,39,47,6],//155
			[167,131,153,154,155,157,158,159,160,161,162,163,39,47,6],//156
			[168,131,153,154,155,156,158,159,160,161,162,163,39,47,6],//157
			[169,131,153,154,155,156,157,159,160,161,162,163,39,47,6],//158
			[170,131,153,154,155,156,157,158,160,161,162,163,39,47,6],//159
			[171,131,153,154,155,156,157,158,159,161,162,163,39,47,6],//160
			[172,131,153,154,155,156,157,158,159,160,162,163,39,47,6],//161
			[177,179,131, 153,154,155,156,157,158,159,160,161,163,39,47,6],//162
			[173,131, 153,154,155,156,157,158,159,160,161,162,39,47,6],//163
			[153],//164
			[154],//165
			[155],//166
			[156],//167
			[157],//168
			[158],//169
			[159],//170
			[160],//171
			[161],//172
			[163],//173
			[175,176],//174
			[174,176,40,43],//175
			[174,175],//176
			[162,179,178],//177
			[177],//178
			[162,177,180,181,42,46],//179
			[179,181,42,46,182],//180
			[180,179,42,46,183],//181
			[180],//182
			[181],//183
			[58,15,205,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,139,150],//184
			[221,58,15,184, 186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,139,150],//185
			[206,58,15,184,185,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,139,150],//186
			[222,58,15,184,185,186, 188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,139,150],//187
			[207,58,15,184,185,186,187, 189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,139,150],//188
			[208,223,224,58,15,184,185,186,187,188, 190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,139,150],//189
			[209,58,15, 184,185,186,187,188,189,191,192,193,194,195,196,197,198,199,200,201,202,203,204,139,150],//190
			[210,58,15, 184,185,186,187,188,189,190,192,193,194,195,196,197,198,199,200,201,202,203,204,139,150],//191
			[211,226,58,15, 184,185,186,187,188,189,190,191,193,194,195,196,197,198,199,200,201,202,203,204,139,150],//192
			[212,230,58,15, 184,185,186,187,188,189,190,191,192,194,195,196,197,198,199,200,201,202,203,204,139,150],//193
			[213,58,15, 184,185,186,187,188,189,190,191,192,193,195,196,197,198,199,200,201,202,203,204,139,150],//194
			[214,58,15,184,185,186,187,188,189,190,191,192,193,194,196,197,198,199,200,201,202,203,204,139,150],//195
			[215,58,15, 184,186,185,187,188,189,190,191,192,193,194,195,197,198,199,200,201,202,203,204,139,150],//196
			[231,232,233,234,235,236,58,15, 184,186,185,187,188,189,190,191,192,193,194,195,196,198,199,200,201,202,203,204,139,150],//197
			[216,58,15,184,186,185,187,188,189,190,191,192,193,194,195,196,197,199,200,201,202,203,204,139,150],//198
			[217,58,15, 184,186,185,187,188,189,190,191,192,193,194,195,196,197,198,200,201,202,203,204,139,150],//199
			[243,249,58,15,184,186,185,187,188,189,190,191,192,193,194,195,196,197,198,199,201,202,203,204,139,150],//200
			[15,58,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,218,202,203,204,139,150],//201
			[15,58,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,219,203,204,139,150],//202
			[15,58,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,248,204,139,150],//203
			[15,58,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,220,139,150],//204
			[184],//205
			[186],//206
			[188],//207
			[189,223,224],//208
			[190],//209
			[191],//210
			[192],//211
			[193],//212
			[194],//213
			[195],//214
			[196],//215
			[198],//216
			[199],//217
			[201],//218
			[202],//219
			[204],//220
			[185],//221
			[187],//222
			[224,225,189,208],//223
			[223,189,208],//224
			[223],//225
			[192,227],//226
			[226,228],//227
			[227,229],//228
			[228],//229
			[193,212],//230
			[197,232,233,234,235,236,240],//231
			[197,231,233,234,235,236,242],//232
			[197,231,232,234,235,236,239],//233
			[197,231,232,233,235,236,243],//234
			[197,231,232,233,234,236,244],//235
			[197,231,232,233,234,235,237,238],//236
			[236,238],//237
			[237,239],//238
			[233,238],//239
			[231,241,242],//240
			[240,242],//241
			[232,240,241],//242
			[200,234,249],//243
			[235,245],//244
			[244,246,134],//245
			[134,245],//246
			[0,19,20,21,22,23,24,25,26,27,28],//247
			[203],//248
			[200,243]//249
		]
	];

	//When floor will be change this function will be executed.
	//For the starting floor selectNum will be 0
	//For the ending floor selecNum will be 1
	//For Next Step button selectNum will be 2
	function changeFloor(selectNum) {
		if(floorNum != ''){
			var array0 = new Array(graph[floorNum].length);
			array0.fill(true);
			drawIsRunning = new Array(graph[floorNum].length);
			drawIsRunning.fill(array0);
		}
		//Removing previous lines while changing a floor
		removeLines();
		//If Next Step button is visiable it will be hidden
		document.getElementById('nxbtn').style.display = 'none';
		//If no floor selected then image will be removed
		if(document.getElementById('flr').value == '' && document.getElementById('eflr').value == ''){
			document.getElementById('imgLoader').src = '';
		}
		// If selectNum value 0 this condition will true
		if(!selectNum){
			//checking is there any floor selected
			if(document.getElementById('flr').value != ''){
				//Image Loading part
				document.getElementById('header').style.display = 'none';
				document.getElementById('display').innerHTML = 'Please wait while loading Image...';
				var iml = document.getElementById('imgLoader');
				floorNum = parseInt(document.getElementById('flr').value);
				document.getElementById('bdy').removeChild(iml);
				iml = document.createElement('img');
				iml.id = 'imgLoader';
				iml.data = document.getElementById('flr').value;
				iml.src = img[floorNum];
				document.getElementById('bdy').appendChild(iml);
				iml.onload = function () {
					var elementHeight = heightCrossBrowser(iml);
					pathScale = elementHeight / imgScale;// imgScale = 600
					iml.style.height = imgScale+'px';
					console.log('Current Image Height:'+elementHeight);
				}
				console.log('Current Path Scale:'+pathScale);
				/*
				  Filling up drawIsRunning with true
				  Suppose point 67 to point 46 a strait line is being drawn and then drawIsRunning[67][47] is equal to false
				  if drawIsRunning[67][47] became true then drawer function will stop drawing
				  that means every index true means nothing is being drawn
				*/
				var array0 = new Array(graph[floorNum].length);
				array0.fill(true);
				drawIsRunning = new Array(graph[floorNum].length);
				drawIsRunning.fill(array0);
				//putting room list to the menu for new selected floor
				while(document.getElementById('srm').childNodes.length){
					document.getElementById('srm').removeChild(document.getElementById('srm').childNodes[0]);
				}
				var srm = document.getElementById('srm');
				var fsoptn = document.createElement('option');
				fsoptn.innerHTML = 'Select Start Position';
				fsoptn.value = '';
				srm.appendChild(fsoptn);

				for (var i = 0, len = menu[floorNum].length; i < len; i++) {
					var optn = document.createElement('option');
					optn.innerHTML = menu[floorNum][i][1];
					optn.value = menu[floorNum][i][0];
					srm.appendChild(optn);
				}
				document.getElementById('header').style.display = 'block';
				document.getElementById('display').innerHTML = '';
			}
			//If no floor selected menu will be removed
			else{
				while(document.getElementById('srm').childNodes.length){
					document.getElementById('srm').removeChild(document.getElementById('srm').childNodes[0]);
				}
				var fsoptn = document.createElement('option');
				fsoptn.innerHTML = 'Choose a Floor First';
				fsoptn.value = '';
				document.getElementById('srm').appendChild(fsoptn);
				floorNum = '';
			}
		}
		else if(selectNum == 1){
			//checking is there any floor selected
			if(document.getElementById('eflr').value != ''){
				//Image Loading part
				document.getElementById('header').style.display = 'none';
				document.getElementById('display').innerHTML = 'Please wait while loading Image...';
				var iml = document.getElementById('imgLoader');
				iml.src = '';
				document.getElementById('bdy').removeChild(iml);
				iml = document.createElement('img');
				iml.id = 'imgLoader';
				iml.data = document.getElementById('eflr').value;
				iml.src = img[parseInt(document.getElementById('eflr').value)];
				document.getElementById('bdy').appendChild(iml);
				iml.onload = function () {
					var elementHeight = heightCrossBrowser(iml);
					pathScale = elementHeight / imgScale;// imgScale = 600
					iml.style.height = imgScale+'px';
					console.log('Current Image Height:'+elementHeight);
				}
				console.log('Current Path Scale:'+pathScale);
				//putting room list to the menu for new selected floor
				var efloorNum = parseInt(document.getElementById('eflr').value);
				while(document.getElementById('erm').childNodes.length){
					document.getElementById('erm').removeChild(document.getElementById('erm').childNodes[0]);
				}
				var erm = document.getElementById('erm');
				var fsoptn = document.createElement('option');
				fsoptn.innerHTML = 'Select Start Position';
				fsoptn.value = '';
				erm.appendChild(fsoptn);

				for (var i = 0, len = menu[efloorNum].length; i < len; i++) {
					var optn = document.createElement('option');
					optn.innerHTML = menu[efloorNum][i][1];
					optn.value = menu[efloorNum][i][0];
					erm.appendChild(optn);
				}
				document.getElementById('header').style.display = 'block';
				document.getElementById('display').innerHTML = '';
			}
			//If no floor selected menu will be removed
			else{
				while(document.getElementById('erm').childNodes.length){
					document.getElementById('erm').removeChild(document.getElementById('erm').childNodes[0]);
				}
				var fsoptn = document.createElement('option');
				fsoptn.innerHTML = 'Choose a Floor First';
				fsoptn.value = '';
				document.getElementById('erm').appendChild(fsoptn);
				floorNum = '';
			}
		}
		//Onclick next button
		else{
			var sflrn = parseInt(document.getElementById('flr').value),
				eflrn = parseInt(document.getElementById('eflr').value);
			var iml = document.getElementById('imgLoader'),
				nxbtn = document.getElementById('nxbtn');
			//As Next Step button is clicked making it blue
			nxbtn.style.background = '#2f3640';
			//this condition is for checking that user is in the first step
			if(sflrn == parseInt(iml.data)){
				document.getElementById('header').style.display = 'none';
				document.getElementById('display').innerHTML = 'Please wait while loading Image...';
				nxbtn.innerHTML = 'Click to view Previous Step';
				nxbtn.style.display = 'block';
				iml.src = '';
				floorNum = parseInt(document.getElementById('eflr').value);
				document.getElementById('bdy').removeChild(iml);
				iml = document.createElement('img');
				iml.id = 'imgLoader';
				iml.data = document.getElementById('eflr').value;
				iml.src = img[floorNum];
				document.getElementById('bdy').appendChild(iml);
				iml.onload = function () {
					var elementHeight = heightCrossBrowser(iml);
					pathScale = elementHeight / imgScale;// imgScale = 600
					iml.style.height = imgScale+'px';
					console.log('Current Image Height:'+elementHeight);
				}
				console.log('Current Path Scale:'+pathScale);
				var array0 = new Array(graph[floorNum].length);
				array0.fill(true);
				drawIsRunning = new Array(graph[floorNum].length);
				drawIsRunning.fill(array0);
				document.getElementById('display').innerHTML = 'Please wait while showing path...';
				//showpath is the drawer of Strait Line
				showPath(2);
				document.getElementById('header').style.display = 'block';
				document.getElementById('display').innerHTML = '';
			}
			//this condition is for checking that user is in the second step
			else{
				document.getElementById('header').style.display = 'none';
				document.getElementById('display').innerHTML = 'Please wait while loading Image...';
				nxbtn.innerHTML = 'Click to view Next Step';
				nxbtn.style.display = 'block';
				iml.src = '';
				floorNum = parseInt(document.getElementById('flr').value);
				document.getElementById('bdy').removeChild(iml);
				iml = document.createElement('img');
				iml.id = 'imgLoader';
				iml.data = document.getElementById('flr').value;
				iml.src = img[floorNum];
				document.getElementById('bdy').appendChild(iml);
				iml.onload = function () {
					var elementHeight = heightCrossBrowser(iml);
					pathScale = elementHeight / imgScale;// imgScale = 600
					iml.style.height = imgScale+'px';
					console.log('Current Image Height:'+elementHeight);
				}
				console.log('Current Path Scale:'+pathScale);
				var array0 = new Array(graph[floorNum].length);
				array0.fill(true);
				drawIsRunning = new Array(graph[floorNum].length);
				drawIsRunning.fill(array0);
				document.getElementById('display').innerHTML = 'Please wait while showing path...';
				//showpath is the drawer of Strait Line
				showPath(3);
				document.getElementById('header').style.display = 'block';
				document.getElementById('display').innerHTML = '';
			}
		}
	}
	/*
		dijkstra shortest path algorithm implemented here
		dres is for storing dijkstra result
	*/
	var dres = '';
	function dijkstra(srmv) {
		//srmv is the start point
		//this algo calculate all the path from a starting point
		var path = new Array(graph[floorNum].length),
			vist = new Array(graph[floorNum].length),
			dist = new Array(graph[floorNum].length),
			nods = new Array(graph[floorNum].length);

		path.fill(-1);
		dist.fill(-1);
		vist.fill(false);
		nods.fill(0);
		path[srmv] = -2;
		dist[srmv] = 0;
		var fl = true;
		var nodeSteps = 0;
		while(fl){
			nodeSteps ++;
			fl = false;
			var resu = new Array();
			for (var i = 0; i < path.length; i++) {
				if(path[i] != -1 && !vist[i]){// && nods[i] < nodeSteps){
					vist[i] = true;
					for (var j = 0; j < graph[floorNum][i].length; j++) {
						//console.log(i+':'+graph[floorNum][i][j]+':'+path[graph[floorNum][i][j]]);
						if(path[graph[floorNum][i][j]] == -1){
							resu.push([pathDist(graph[floorNum][i][j],i)+dist[i],graph[floorNum][i][j],i]);
							//path[graph[floorNum][i][j]] = i;
							//nods[graph[floorNum][i][j]] = nodeSteps;
						}
					}
				}
				if(!vist[i]){
					fl = true;
				}
			}
			resu.sort(function(a, b){return a[0] - b[0]});
			for (var i = 0; i < resu.length; i++) {
				if(path[resu[i][1]] == -1){
					dist[resu[i][1]] = resu[i][0];
					path[resu[i][1]] = resu[i][2];
					nods[resu[i][1]] = nodeSteps;
				}
			}
		}
		//returning two array
		//dist array stored for getting distance to all points from srmv(staring point)
		//path array stored to get path to any point from srmv(staring point)
		return [dist,path];
	}
	//showPath called when selection chaged of room menu
	async function showPath(selectNum) {
		/*
			when selectNum equals to 0 it's called from the staring selection chaning
			when selectNum equals to 1 it's called from the ending selection
			when selectNum equals to 2 it's called from the next button
			when selectNum equals to 3 it's called from the pevious button
		*/
		//previous lines will be removed when selection chaged of room menu
		removeLines();
		//Hiding Next Step button
		document.getElementById('nxbtn').style.display = 'none';
		//calculating and storing all the point distance and path for a new staring point
		if(!selectNum && document.getElementById('srm').value != ''){
			var srmv = parseInt(document.getElementById('srm').value);
			dres = dijkstra(srmv);
		}
		//selectNum equals to 2 when showPath funtion will be called from Next Step button
		if(selectNum == 2){
			var sflr = parseInt(document.getElementById('flr').value),
				ermv = parseInt(document.getElementById('erm').value);
			//getting result from dijkstra path
			var res_cnt = 999999, res_i, tres = dijkstra(ermv);
			var dist = tres[0], path = tres[1];
			for (var i = 0; i < stairs[floorNum][sflr].length; i++) {
				if(dist[stairs[floorNum][sflr][i]] < res_cnt){
					res_cnt = dist[stairs[floorNum][sflr][i]];
					res_i = stairs[floorNum][sflr][i];
					sStairsP = res_i;
				}
			}
			var res = new Array(), resi = ermv;
			tres = dijkstra(res_i), dist = tres[0], path = tres[1];
			while(path[resi] != -2){
				res.unshift(resi);
				resi = path[resi];
			}
			res.unshift(res_i);
			console.log(res);
			var array0 = new Array(graph[floorNum].length);
			array0.fill(true);
			drawIsRunning = new Array(graph[floorNum].length);
			drawIsRunning.fill(array0);
			drawIsRunning[res_i][ermv] = false;
			removeLines();
			//Drawing starting
			for (var i = 1, len = res.length; i < len; i++) {
				if(drawIsRunning[res_i][ermv]){
					break;
				}
				drawSLine(
					points[floorNum][res[i-1]][0], points[floorNum][res[i-1]][1],
					points[floorNum][res[i]][0], points[floorNum][res[i]][1]
					);
				straitLine_i ++;
				await sleep(pathDist(res[i], res[i-1])*2);
			}
			//when staring point and ending points are same
			if(res.length == 1){
				drawSLine(
					points[floorNum][res[0]][0], points[floorNum][res[0]][1],
					points[floorNum][res[0]][0], points[floorNum][res[0]][1]);
				straitLine_i ++;
			}
			document.getElementById('nxbtn').style.display = 'block';
			return;
		}
		//checking a valide starting and ending points are selected
		if(document.getElementById('srm').value != '' && document.getElementById('erm').value != ''){
			//checking is the correct image loaded in the loader
			var iml = document.getElementById('imgLoader');
			if(document.getElementById('flr').value != iml.data){
				document.getElementById('header').style.display = 'none';
				document.getElementById('display').innerHTML = 'Please wait while loading Image...';
				iml.src = '';
				floorNum = parseInt(document.getElementById('flr').value);
				document.getElementById('bdy').removeChild(iml);
				iml = document.createElement('img');
				iml.id = 'imgLoader';
				iml.data = document.getElementById('flr').value;
				iml.src = img[floorNum];
				document.getElementById('bdy').appendChild(iml);
				iml.onload = function () {
					var elementHeight = heightCrossBrowser(iml);
					pathScale = elementHeight / imgScale;// imgScale = 600
					iml.style.height = imgScale+'px';
					console.log('Current Image Height:'+elementHeight);
				}
				console.log('Current Path Scale:'+pathScale);
				var array0 = new Array(graph[floorNum].length);
				array0.fill(true);
				drawIsRunning = new Array(graph[floorNum].length);
				drawIsRunning.fill(array0);
				document.getElementById('header').style.display = 'block';
				document.getElementById('display').innerHTML = '';
			}
			//Conding for checking are those starting point and ending point from same floor
			if(document.getElementById('flr').value == document.getElementById('eflr').value){
				floorNum = parseInt(document.getElementById('flr').value);
				var srmv = parseInt(document.getElementById('srm').value),
					ermv = parseInt(document.getElementById('erm').value);
				//getting result from dijkstra path. (dres[1] = path)
				var res = new Array(), resi = ermv, path = dres[1];
				while(path[resi] != -2){
					res.unshift(resi);
					resi = path[resi];
				}
				res.unshift(srmv);
				console.log(res);
				var array0 = new Array(graph[floorNum].length);
				array0.fill(true);
				drawIsRunning = new Array(graph[floorNum].length);
				drawIsRunning.fill(array0);
				drawIsRunning[srmv][ermv] = false;
				removeLines();
				//Drawing starting
				for (var i = 1, len = res.length; i < len; i++) {
					if(drawIsRunning[srmv][ermv]){
						break;
					}
					drawSLine(
						points[floorNum][res[i-1]][0], points[floorNum][res[i-1]][1],
						points[floorNum][res[i]][0], points[floorNum][res[i]][1]
						);
					straitLine_i ++;
					await sleep(pathDist(res[i], res[i-1])*2);
				}
				//when staring and ending points are same
				if(res.length == 1){
					drawSLine(
						points[floorNum][res[0]][0], points[floorNum][res[0]][1],
						points[floorNum][res[0]][0], points[floorNum][res[0]][1]);
					straitLine_i ++;
				}
			}
			//when two defferent floor's rooms are selected
			else{
				var srmv = parseInt(document.getElementById('srm').value),
					eflr = parseInt(document.getElementById('eflr').value);
				dres = dijkstra(srmv);
				//getting the nearest stairs
				var res_cnt = 999999, res_i, dist = dres[0];
				for (var i = 0; i < stairs[floorNum][eflr].length; i++) {
					if(dist[stairs[floorNum][eflr][i]] < res_cnt){
						res_cnt = dist[stairs[floorNum][eflr][i]];
						res_i = stairs[floorNum][eflr][i];
						sStairsP = res_i;
					}
				}
				var res = new Array(), resi = res_i, path = dres[1];
				while(path[resi] != -2){
					res.unshift(resi);
					resi = path[resi];
				}
				res.unshift(srmv);
				console.log(res);
				var array0 = new Array(graph[floorNum].length);
				array0.fill(true);
				drawIsRunning = new Array(graph[floorNum].length);
				drawIsRunning.fill(array0);
				drawIsRunning[srmv][res_i] = false;
				removeLines();
				//drawing starting from staring point to nearest stair
				for (var i = 1, len = res.length; i < len; i++) {
					if(drawIsRunning[srmv][res_i]){
						break;
					}
					drawSLine(
						points[floorNum][res[i-1]][0], points[floorNum][res[i-1]][1],
						points[floorNum][res[i]][0], points[floorNum][res[i]][1]
						);
					straitLine_i ++;
					await sleep(pathDist(res[i], res[i-1])*2);
				}
				//when starting point and ending points are same
				if(res.length == 1){
					drawSLine(
						points[floorNum][res[0]][0], points[floorNum][res[0]][1],
						points[floorNum][res[0]][0], points[floorNum][res[0]][1]);
					straitLine_i ++;
				}
				//checking is Next Step button clicked
				if(selectNum == 3){
					document.getElementById('nxbtn').style.background = '#2f3640';
				}
				else{
					document.getElementById('nxbtn').style.background = '#739690';
				}
				document.getElementById('nxbtn').innerHTML = 'Click to view Next Step';
				document.getElementById('nxbtn').style.display = 'block';
			}
		}
		//If no starting point or no ending point will be selected then previous line will be removed
		else{
			var array0 = new Array(graph[floorNum].length);
			array0.fill(true);
			drawIsRunning = new Array(graph[floorNum].length);
			drawIsRunning.fill(array0);
			removeLines();
		}
	}
	/*
	// get Cartesian Giometrical (x,y) on mouse click
	function onMouseDown(evt) {
	  var mousex = event.clientX;//(event.clientX / window.innerWidth) * 2 - 1;
	  var mousey = event.clientY;//-(event.clientY / window.innerHeight) * 2 + 1;
	  //alert("X: "+mousex+"; Y: "+mousey);
	  //console.log("Mouse Clicked:: X: "+mousex+"; Y: "+mousey);
	  document.getElementById('display').innerHTML = "Mouse Clicked:: X: "+mousex+"; Y: "+mousey;
	}*/

</script>

</body>
</html>